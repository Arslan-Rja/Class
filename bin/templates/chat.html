<title>Chat - {{ class_id }}</title>
</head>
<body>
    <h1>Chat Room - {{ class_id }}</h1>

   <div>
    {% for message in messages %}
    <p>{{ message.username }} ({{ message.sent_at.strftime('%Y-%m-%d %H:%M:%S') }}): {{ message.content }}</p>
    {% if message.user_id == session['user_id'] %}
    <form method="POST" id="editForm{{message.id}}" style="display: none;" action="{{ url_for('edit_message', message_id=message.id, class_id=class_id) }}">
        <input type="text" name="editted" required>
        <button type="submit">Submit</button>
        <button type="button" onclick="document.getElementById('editForm{{message.id}}').style.display = 'none';">Cancel</button>
        <form method="POST" style="display: none;" id="deleteForm{{message.id}}" action="{{ url_for('delete_message', message_id=message.id, class_id=class_id) }}">
            <button type="submit" style="color: red;">Delete</button>
        </form>
    </form>
    <button onclick="document.getElementById('editForm{{message.id}}').style.display = 'inline';">Edit</button>
    {% endif %}
    {% endfor %}
</div>

    <form method="POST" action="{{ url_for('send_message', class_id=class_id) }}">
        <label for="content">Your message:</label>
        <input type="text" id="content" name="content" required>
        <button type="submit">Send</button>
    </form>

    <a href="{{ url_for('classes') }}">Back to Classes</a>
</body>
</html>

